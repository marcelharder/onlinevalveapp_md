version: '3.1'

services: 

  db:
    image: mariadb
    restart: always
    environment:
      MYSQL_ROOT_PASSWORD: example
    networks: 
      - internal-container-network  
    volumes:
     - mariadb-data:/var/lib/mysql

  product:
    image: product_app:v3
    networks:
      - internal-container-network
    depends_on:
      - db
    ports:
      - 8104:80   
  
  comservice:
    image: comservice:v91
    restart: always
    networks: 
     - internal-container-network  

  hospital:
     image: hospital_app:v15
     ports:
       - 8103:80
     networks: 
       - internal-container-network
     volumes:
      - sqldata:/root/.aspnet/DataProtection-Keys
     depends_on: 
        - db
  #valveinventory:
  #  image: inventory_md:v26
  #  ports:
  #    - 8045:80
  #  networks: 
  #    - internal-container-network
  #  volumes:
  #   - sqldata:/root/.aspnet/DataProtection-Keys
  #  depends_on: 
  #     - db
   
volumes:
  sqldata:
  mariadb-data:

networks:
  internal-container-network:
    driver: bridge